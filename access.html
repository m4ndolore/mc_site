<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="Access Defense Builders - your portal to the defense tech community. Connect with operators, access resources, and track opportunities.">
  <meta name="keywords" content="defense tech, defense builders, national security, portal, community">

  <!-- Favicon -->
  <link rel="icon" type="image/png" sizes="32x32" href="https://imagedelivery.net/9Lsa8lkCUz_we5KeaTm7fw/arrows/public">
  <link rel="icon" type="image/png" sizes="16x16" href="https://imagedelivery.net/9Lsa8lkCUz_we5KeaTm7fw/arrows/public">
  <link rel="apple-touch-icon" href="https://imagedelivery.net/9Lsa8lkCUz_we5KeaTm7fw/arrows/public">

  <!-- Open Graph -->
  <meta property="og:title" content="Access Defense Builders — Merge Combinator">
  <meta property="og:description" content="Your portal to the defense tech community. Connect with operators, access resources, and track opportunities.">
  <meta property="og:type" content="website">

  <title>Access Defense Builders — Merge Combinator</title>

  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Lora:ital,wght@0,400;0,500;0,600;1,400;1,500;1,600&family=Space+Mono:wght@400;700&family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">

  <style>
    :root {
      --bg-primary: #0b0f14;
      --bg-card: rgba(17,24,39,0.85);
      --bg-input: rgba(0,0,0,0.30);
      --border-subtle: rgba(255,255,255,0.10);
      --border-hover: rgba(255,255,255,0.25);
      --text-primary: #e5e7eb;
      --text-secondary: rgba(229,231,235,0.70);
      --text-tertiary: rgba(229,231,235,0.45);
      --accent: #0ea5e9;
      --accent-hover: #0284c7;
      --accent-subtle: rgba(14,165,233,0.12);
      --accent-border: rgba(14,165,233,0.35);
      --success: rgba(16,185,129,0.25);
      --success-border: rgba(16,185,129,0.50);
      --success-text: rgba(209,250,229,0.95);
    }

    * { box-sizing: border-box; margin: 0; padding: 0; }

    body {
      font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
      background: var(--bg-primary);
      color: var(--text-primary);
      min-height: 100vh;
    }

    .access-page {
      display: flex;
      min-height: 100vh;
    }

    /* Left: Hero Section */
    .access-hero {
      flex: 1;
      position: relative;
      display: flex;
      flex-direction: column;
      justify-content: center;
      padding: 60px;
      overflow: hidden;
    }

    .access-hero::before {
      content: '';
      position: absolute;
      inset: 0;
      background-image: url('https://imagedelivery.net/9Lsa8lkCUz_we5KeaTm7fw/pentagon/public');
      background-size: cover;
      background-position: center;
      opacity: 0.2;
      z-index: 0;
    }

    .access-hero__content {
      position: relative;
      z-index: 1;
      max-width: 520px;
    }

    .access-hero__logo {
      display: flex;
      align-items: center;
      gap: 8px;
      margin-bottom: 48px;
      text-decoration: none;
      transition: opacity 0.15s ease;
    }

    .access-hero__logo:hover {
      opacity: 0.85;
    }

    .access-hero__logo-text {
      display: flex;
      flex-direction: column;
      align-items: flex-start;
      line-height: 1;
    }

    .access-hero__logo-merge {
      font-family: 'Lora', Georgia, serif;
      font-size: 11px;
      font-weight: 400;
      font-style: italic;
      color: rgba(242, 245, 247, 0.7);
    }

    .access-hero__logo-combinator {
      font-family: 'Helvetica Neue', 'Inter', Helvetica, Arial, sans-serif;
      font-size: 22px;
      font-weight: 700;
      letter-spacing: -0.02em;
      color: var(--text-primary);
    }

    .access-hero__logo-icon {
      height: 22px;
      width: auto;
      display: block;
      margin-left: 2px;
    }

    .access-hero__title {
      font-size: clamp(1.75rem, 3.5vw, 2.5rem);
      font-weight: 700;
      color: var(--text-primary);
      line-height: 1.2;
      margin-bottom: 16px;
    }

    .access-hero__subtitle {
      font-size: 14px;
      color: var(--text-secondary);
      line-height: 1.6;
      margin-bottom: 32px;
    }

    .access-hero__features {
      display: flex;
      flex-direction: column;
      gap: 12px;
    }

    .access-hero__feature {
      display: flex;
      align-items: flex-start;
      gap: 12px;
      padding: 12px 14px;
      background: rgba(255,255,255,0.03);
      border: 1px solid var(--border-subtle);
    }

    .access-hero__feature-icon {
      width: 22px;
      height: 22px;
      background: var(--success);
      border: 1px solid var(--success-border);
      display: flex;
      align-items: center;
      justify-content: center;
      color: var(--success-text);
      font-size: 11px;
      font-weight: 700;
      flex-shrink: 0;
    }

    .access-hero__feature-text {
      font-size: 13px;
      color: var(--text-secondary);
      line-height: 1.45;
    }

    .access-hero__feature-text strong {
      color: var(--text-primary);
    }

    /* Right: Card Section */
    .access-card-section {
      width: 520px;
      max-width: 100%;
      padding: 48px;
      display: flex;
      align-items: center;
      justify-content: center;
      background: rgba(6, 14, 28, 0.55);
      border-left: 1px solid rgba(148, 163, 255, 0.18);
    }

    .access-card {
      width: 100%;
      max-width: 420px;
      background: linear-gradient(180deg, rgba(8, 20, 40, 0.98), rgba(6, 16, 34, 0.98));
      border: 1px solid rgba(148, 163, 255, 0.24);
      border-radius: 2px;
      box-shadow: 0 24px 80px rgba(2, 6, 23, 0.65);
      padding: 36px;
    }

    .access-card__header {
      text-align: center;
      margin-bottom: 24px;
    }

    .access-card__title {
      font-size: 16px;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.02em;
      margin-bottom: 6px;
    }

    .access-card__subtitle {
      font-size: 13px;
      color: var(--text-secondary);
    }

    .access-card__secured {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
      margin-top: 16px;
      padding: 10px 14px;
      background: rgba(15, 23, 42, 0.62);
      border: 1px solid rgba(148, 163, 255, 0.22);
      border-radius: 2px;
    }

    .access-card__secured-icon {
      height: 16px;
      width: auto;
      object-fit: contain;
      border-radius: 2px;
    }

    .access-card__secured-text {
      font-size: 11px;
      font-weight: 500;
      text-transform: uppercase;
      letter-spacing: 0.04em;
      color: var(--text-tertiary);
    }

    .access-card__new-here {
      text-align: center;
      margin-top: 12px;
      font-size: 13px;
      color: var(--text-secondary);
    }

    .access-card__new-here a {
      color: rgba(56,189,248,0.90);
      text-decoration: none;
      font-weight: 500;
    }

    .access-card__new-here a:hover {
      text-decoration: underline;
    }

    /* Method buttons (matching via-login) */
    .access-card__methods {
      display: flex;
      flex-direction: column;
      gap: 10px;
      margin-bottom: 20px;
    }

    .access-card__method {
      display: flex;
      align-items: center;
      gap: 14px;
      padding: 14px 16px;
      border: 1px solid rgba(148, 163, 255, 0.22);
      background: rgba(15, 23, 42, 0.55);
      border-radius: 2px;
      text-decoration: none;
      color: var(--text-primary);
      transition: border-color 100ms, background 100ms;
    }

    .access-card__method:hover {
      border-color: rgba(147, 197, 253, 0.55);
      background: rgba(59, 130, 246, 0.18);
    }

    .access-card__method--primary {
      border-color: rgba(147, 197, 253, 0.6);
      background: rgba(59, 130, 246, 0.28);
    }

    .access-card__method--primary:hover {
      border-color: rgba(191, 219, 254, 0.8);
      background: rgba(59, 130, 246, 0.38);
    }

    .access-card__method-icon {
      width: 40px;
      height: 40px;
      background: rgba(15, 23, 42, 0.72);
      border: 1px solid rgba(148, 163, 255, 0.22);
      border-radius: 2px;
      display: flex;
      align-items: center;
      justify-content: center;
      flex-shrink: 0;
      color: var(--text-secondary);
    }

    .access-card__method--primary .access-card__method-icon {
      background: rgba(59, 130, 246, 0.32);
      border-color: rgba(147, 197, 253, 0.7);
      color: #bfdbfe;
    }

    .access-card__method-content {
      flex: 1;
      min-width: 0;
    }

    .access-card__method-title {
      font-size: 14px;
      font-weight: 600;
    }

    .access-card__method-desc {
      margin-top: 2px;
      font-size: 12px;
      color: var(--text-tertiary);
    }

    .access-card__method-arrow {
      font-size: 16px;
      color: var(--text-tertiary);
      transition: color 100ms;
    }

    .access-card__method:hover .access-card__method-arrow {
      color: var(--text-secondary);
    }

    /* Divider */
    .access-card__divider {
      display: flex;
      align-items: center;
      gap: 12px;
      margin: 20px 0;
    }

    .access-card__divider-line {
      flex: 1;
      height: 1px;
      background: var(--border-subtle);
    }

    .access-card__divider-text {
      font-size: 10px;
      color: var(--text-tertiary);
      text-transform: uppercase;
      letter-spacing: 0.06em;
    }

    /* SSO buttons (matching sigmablox/join) */
    .access-card__sso {
      display: flex;
      gap: 10px;
    }

    .access-card__sso-btn {
      flex: 1;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
      padding: 12px 14px;
      border: 1px solid rgba(148, 163, 255, 0.22);
      background: rgba(15, 23, 42, 0.55);
      border-radius: 2px;
      text-decoration: none;
      color: var(--text-primary);
      font-size: 12px;
      font-weight: 500;
      transition: border-color 100ms, background 100ms;
    }

    .access-card__sso-btn:hover {
      border-color: rgba(147, 197, 253, 0.55);
      background: rgba(59, 130, 246, 0.18);
    }

    .access-card__sso-btn--disabled {
      opacity: 0.50;
      pointer-events: none;
      border-style: dashed;
    }

    .access-card__sso-icon {
      width: 20px;
      height: 20px;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .access-card__sso-badge {
      font-size: 9px;
      font-weight: 700;
      text-transform: uppercase;
      letter-spacing: 0.08em;
      padding: 2px 6px;
      background: rgba(245,158,11,0.20);
      border: 1px solid rgba(245,158,11,0.40);
      color: #fbbf24;
    }

    /* Requirements section */
    .access-card__requirements {
      margin-top: 20px;
      padding: 16px;
      background: rgba(15, 23, 42, 0.6);
      border: 1px solid rgba(148, 163, 255, 0.2);
      border-radius: 2px;
    }

    .access-card__requirements-header {
      font-size: 10px;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.08em;
      color: var(--text-tertiary);
      margin-bottom: 12px;
    }

    .access-card__requirements-list {
      display: flex;
      flex-direction: column;
      gap: 8px;
      margin-bottom: 12px;
    }

    .access-card__requirements-item {
      display: flex;
      align-items: flex-start;
      gap: 8px;
      font-size: 12px;
      color: var(--text-secondary);
      line-height: 1.4;
    }

    .access-card__requirements-check {
      color: var(--success-text);
      font-size: 11px;
      flex-shrink: 0;
      margin-top: 1px;
    }

    .access-card__requirements-legal {
      font-size: 11px;
      color: var(--text-tertiary);
      line-height: 1.5;
      margin-bottom: 12px;
    }

    .access-card__requirements-legal a {
      color: rgba(56,189,248,0.90);
      text-decoration: none;
    }

    .access-card__requirements-legal a:hover {
      text-decoration: underline;
    }

    /* Footer */
    .access-card__footer {
      margin-top: 20px;
      padding-top: 16px;
      border-top: 1px solid rgba(148, 163, 255, 0.2);
      text-align: center;
    }

    .access-card__footer-text {
      font-size: 12px;
      color: var(--text-tertiary);
    }

    .access-card__footer-link {
      color: rgba(56,189,248,0.90);
      text-decoration: none;
      font-weight: 500;
    }

    .access-card__footer-link:hover {
      text-decoration: underline;
    }

    /* Mobile responsive */
    @media (max-width: 968px) {
      .access-page {
        flex-direction: column;
      }

      .access-hero {
        padding: 40px 24px;
        min-height: auto;
      }

      .access-card-section {
        width: 100%;
        border-left: 0;
        border-top: 1px solid var(--border-subtle);
        padding: 32px 24px;
      }

      .access-card__sso {
        flex-direction: column;
      }

      .access-card__method {
        min-height: 44px;
      }

      .access-card__sso-btn {
        min-height: 44px;
      }
    }

    /* Request Access Drawer */
    .request-drawer {
      position: fixed;
      inset: 0;
      z-index: 1000;
      pointer-events: none;
    }

    .request-drawer.is-open {
      pointer-events: auto;
    }

    .request-drawer__backdrop {
      position: absolute;
      inset: 0;
      background: rgba(0, 0, 0, 0.5);
      opacity: 0;
      transition: opacity 0.3s ease;
    }

    .request-drawer.is-open .request-drawer__backdrop {
      opacity: 1;
    }

    .request-drawer__panel {
      position: absolute;
      top: 0;
      right: 0;
      bottom: 0;
      width: 520px;
      max-width: 100%;
      background: var(--bg-card);
      border-left: 1px solid var(--border-subtle);
      padding: 48px;
      display: flex;
      flex-direction: column;
      transform: translateX(100%);
      transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      overflow-y: auto;
    }

    .request-drawer.is-open .request-drawer__panel {
      transform: translateX(0);
    }

    .request-drawer__close {
      position: absolute;
      top: 20px;
      right: 20px;
      width: 36px;
      height: 36px;
      display: flex;
      align-items: center;
      justify-content: center;
      background: rgba(255, 255, 255, 0.05);
      border: 1px solid var(--border-subtle);
      color: var(--text-secondary);
      cursor: pointer;
      transition: border-color 0.15s, color 0.15s, background 0.15s;
    }

    .request-drawer__close:hover {
      border-color: var(--border-hover);
      color: var(--text-primary);
      background: rgba(255, 255, 255, 0.08);
    }

    .request-drawer__header {
      margin-bottom: 32px;
    }

    .request-drawer__title {
      font-size: 20px;
      font-weight: 600;
      color: var(--text-primary);
      margin-bottom: 8px;
    }

    .request-drawer__subtitle {
      font-size: 14px;
      color: var(--text-secondary);
    }

    .request-drawer__form {
      display: flex;
      flex-direction: column;
      gap: 20px;
      flex: 1;
    }

    .request-drawer__field {
      display: flex;
      flex-direction: column;
      gap: 6px;
    }

    .request-drawer__label {
      font-size: 12px;
      font-weight: 500;
      text-transform: uppercase;
      letter-spacing: 0.04em;
      color: var(--text-secondary);
    }

    .request-drawer__input,
    .request-drawer__select {
      padding: 14px 16px;
      background: var(--bg-input);
      border: 1px solid var(--border-subtle);
      color: var(--text-primary);
      font-family: inherit;
      font-size: 14px;
      transition: border-color 0.15s, background 0.15s;
    }

    .request-drawer__input::placeholder {
      color: var(--text-tertiary);
    }

    .request-drawer__input:focus,
    .request-drawer__select:focus {
      outline: none;
      border-color: var(--accent-border);
      background: rgba(14, 165, 233, 0.08);
    }

    .request-drawer__select {
      cursor: pointer;
      appearance: none;
      background-image: url("data:image/svg+xml,%3Csvg width='12' height='12' viewBox='0 0 12 12' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M3 4.5L6 7.5L9 4.5' stroke='%239ca3af' stroke-width='1.5' stroke-linecap='round' stroke-linejoin='round'/%3E%3C/svg%3E");
      background-repeat: no-repeat;
      background-position: right 16px center;
      padding-right: 40px;
    }

    .request-drawer__select option {
      background: var(--bg-primary);
      color: var(--text-primary);
    }

    .request-drawer__submit {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 10px;
      margin-top: 12px;
      padding: 16px 24px;
      background: var(--accent);
      border: 1px solid var(--accent);
      color: white;
      font-family: inherit;
      font-size: 14px;
      font-weight: 600;
      cursor: pointer;
      transition: background 0.15s, border-color 0.15s;
    }

    .request-drawer__submit:hover {
      background: var(--accent-hover);
      border-color: var(--accent-hover);
    }

    .request-drawer__success {
      flex: 1;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      text-align: center;
      padding: 40px 20px;
    }

    .request-drawer__success-icon {
      width: 56px;
      height: 56px;
      display: flex;
      align-items: center;
      justify-content: center;
      background: var(--success);
      border: 1px solid var(--success-border);
      border-radius: 50%;
      color: var(--success-text);
      font-size: 24px;
      margin-bottom: 20px;
    }

    .request-drawer__success-title {
      font-size: 18px;
      font-weight: 600;
      color: var(--text-primary);
      margin-bottom: 8px;
    }

    .request-drawer__success-text {
      font-size: 14px;
      color: var(--text-secondary);
      line-height: 1.5;
    }

    .request-drawer__footer {
      margin-top: 24px;
      padding-top: 20px;
      border-top: 1px solid var(--border-subtle);
      font-size: 13px;
      color: var(--text-secondary);
      text-align: center;
    }

    .request-drawer__footer a {
      color: rgba(56, 189, 248, 0.90);
      text-decoration: none;
      font-weight: 500;
    }

    .request-drawer__footer a:hover {
      text-decoration: underline;
    }

    @media (max-width: 968px) {
      .request-drawer__panel {
        width: 100%;
        padding: 32px 24px;
      }
    }
  </style>
</head>
<body>
  <main class="access-page">
    <!-- Left: Hero Section -->
    <section class="access-hero">
      <div class="access-hero__content">
        <a href="/" class="access-hero__logo">
          <span class="access-hero__logo-text">
            <span class="access-hero__logo-merge">Merge</span>
            <span class="access-hero__logo-combinator">Combinator</span>
          </span>
          <img src="https://imagedelivery.net/9Lsa8lkCUz_we5KeaTm7fw/arrows/public" alt="" class="access-hero__logo-icon">
        </a>

        <h1 class="access-hero__title">Defense Builders Portal</h1>
        <p class="access-hero__subtitle">
          Your gateway to the defense tech community. This is not an application to an incubator—it's
          access to a members-only portal where you can connect, learn, and find opportunities.
        </p>

        <div class="access-hero__features">
          <div class="access-hero__feature">
            <span class="access-hero__feature-icon">&#10003;</span>
            <span class="access-hero__feature-text">Browse and track defense tech opportunities</span>
          </div>
          <div class="access-hero__feature">
            <span class="access-hero__feature-icon">&#10003;</span>
            <span class="access-hero__feature-text">Meet our trusted operators, founders, and advisors</span>
          </div>
          <div class="access-hero__feature">
            <span class="access-hero__feature-icon">&#10003;</span>
            <span class="access-hero__feature-text"><strong>Get to work:</strong> Match with champions, mission owners, and problem solvers</span>
          </div>
          <div class="access-hero__feature">
            <span class="access-hero__feature-icon">&#10003;</span>
            <span class="access-hero__feature-text">Access exclusive resources and events</span>
          </div>
          <div class="access-hero__feature">
            <span class="access-hero__feature-icon">&#128640;</span>
            <span class="access-hero__feature-text"><strong>SigmaBlox alumni:</strong> 1 year free access included</span>
          </div>
        </div>
      </div>
    </section>

    <!-- Right: Login Card -->
    <section class="access-card-section">
      <div class="access-card">
        <div class="access-card__header">
          <h2 class="access-card__title">Authenticate</h2>
          <div class="access-card__secured">
            <img src="/assets/logos/via2_rect_backed.jpg" alt="VIA" class="access-card__secured-icon">
            <span class="access-card__secured-text">Secured by VIA</span>
          </div>
        </div>

        <div class="access-card__methods">
          <a href="/auth/login" class="access-card__method access-card__method--primary">
            <div class="access-card__method-icon">
              <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"/>
                <polyline points="22,6 12,13 2,6"/>
              </svg>
            </div>
            <div class="access-card__method-content">
              <div class="access-card__method-title">Continue with Email or Username</div>
              <div class="access-card__method-desc">Email, magic link, or passkey</div>
            </div>
            <div class="access-card__method-arrow">&#8594;</div>
          </a>
        </div>

        <p class="access-card__new-here">
          New here? <a href="#" id="open-request-drawer">Apply for access</a>
        </p>

        <div class="access-card__divider">
          <span class="access-card__divider-line"></span>
          <span class="access-card__divider-text">or continue with</span>
          <span class="access-card__divider-line"></span>
        </div>

        <div class="access-card__sso">
          <a href="https://api.sigmablox.com/auth/sso/start?provider=google&returnTo=https://www.mergecombinator.com/" class="access-card__sso-btn">
            <div class="access-card__sso-icon">
              <svg width="20" height="20" viewBox="0 0 24 24">
                <path fill="currentColor" d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"/>
                <path fill="currentColor" d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"/>
                <path fill="currentColor" d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"/>
                <path fill="currentColor" d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"/>
              </svg>
            </div>
            <span>Google</span>
          </a>
          <a href="#" class="access-card__sso-btn access-card__sso-btn--disabled">
            <div class="access-card__sso-icon">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <rect x="3" y="4" width="18" height="16" rx="2"/>
                <circle cx="9" cy="10" r="2"/>
                <path d="M15 8h2M15 12h2"/>
                <path d="M7 16h10"/>
              </svg>
            </div>
            <span>CAC / PIV</span>
            <span class="access-card__sso-badge">Pending</span>
          </a>
        </div>

        <div class="access-card__requirements">
          <div class="access-card__requirements-header">Requirements</div>
          <div class="access-card__requirements-list">
            <div class="access-card__requirements-item">
              <span class="access-card__requirements-check">&#10003;</span>
              <span>A valid individual or company email</span>
            </div>
            <div class="access-card__requirements-item">
              <span class="access-card__requirements-check">&#10003;</span>
              <span>A validated proof of identity (VIA, trusted government ID, or partner login)</span>
            </div>
          </div>
          <p class="access-card__requirements-legal">
            By continuing, you acknowledge our <a href="/privacy.html">Privacy Policy</a> and agree to the <a href="/terms.html">terms of service</a>.
          </p>
        </div>

        <div class="access-card__footer">
          <p class="access-card__footer-text">
            Questions? <a href="/" class="access-card__footer-link">Learn more about Merge Combinator</a>
          </p>
        </div>
      </div>
    </section>

    <!-- Request Access Drawer (overlays auth card) -->
    <div class="request-drawer" id="request-drawer">
      <div class="request-drawer__backdrop" id="drawer-backdrop"></div>
      <div class="request-drawer__panel">
        <button class="request-drawer__close" id="close-drawer" aria-label="Close">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M18 6L6 18M6 6l12 12"/>
          </svg>
        </button>

        <div class="request-drawer__header">
          <h2 class="request-drawer__title">Request Access</h2>
          <p class="request-drawer__subtitle">Join the Defense Builders community</p>
        </div>

        <form class="request-drawer__form" id="request-form">
          <div class="request-drawer__field">
            <label for="request-name" class="request-drawer__label">Full Name</label>
            <input
              type="text"
              id="request-name"
              name="name"
              class="request-drawer__input"
              placeholder="Your full name"
              required
            >
          </div>

          <div class="request-drawer__field">
            <label for="request-email" class="request-drawer__label">Email</label>
            <input
              type="email"
              id="request-email"
              name="email"
              class="request-drawer__input"
              placeholder="you@company.com"
              required
            >
          </div>

          <div class="request-drawer__field">
            <label for="request-role" class="request-drawer__label">Role</label>
            <select id="request-role" name="role" class="request-drawer__select" required>
              <option value="" disabled selected>Select your role</option>
              <option value="founder">Founder</option>
              <option value="operator">Operator</option>
              <option value="investor">Investor</option>
              <option value="advisor">Advisor</option>
              <option value="other">Other</option>
            </select>
          </div>

          <button type="submit" class="request-drawer__submit">
            Request Access
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M5 12h14M12 5l7 7-7 7"/>
            </svg>
          </button>
        </form>

        <div class="request-drawer__success" id="request-success" style="display: none;">
          <div class="request-drawer__success-icon">&#10003;</div>
          <h3 class="request-drawer__success-title">Request Submitted</h3>
          <p class="request-drawer__success-text">We'll review your request and get back to you shortly.</p>
        </div>

        <p class="request-drawer__footer">
          Already have access? <a href="#" id="drawer-sign-in">Sign in</a>
        </p>
      </div>
    </div>
  </main>

  <script>
    // Access request configuration (set requestEndpoint to enable backend submission)
    window.MCAccessConfig = {
      requestEndpoint: 'https://api.sigmablox.com/api/access-request',
      notifyEmail: 'access@mergecombinator.com'
    };
  </script>

  <script>
    // Request Access Drawer
    (function() {
      const drawer = document.getElementById('request-drawer');
      const openBtn = document.getElementById('open-request-drawer');
      const closeBtn = document.getElementById('close-drawer');
      const backdrop = document.getElementById('drawer-backdrop');
      const signInLink = document.getElementById('drawer-sign-in');
      const form = document.getElementById('request-form');
      const successEl = document.getElementById('request-success');
      const config = window.MCAccessConfig || {};

      // Guard for partial renders
      if (!drawer || !openBtn || !closeBtn || !backdrop || !signInLink || !form || !successEl) {
        console.warn('[Access] Drawer elements missing; skipping drawer wiring.');
        return;
      }

      function openDrawer(e) {
        e.preventDefault();
        drawer.classList.add('is-open');
        document.body.style.overflow = 'hidden';
      }

      function closeDrawer(e) {
        if (e) e.preventDefault();
        drawer.classList.remove('is-open');
        document.body.style.overflow = '';
        // Reset form after animation
        setTimeout(() => {
          form.reset();
          form.style.display = '';
          successEl.style.display = 'none';
        }, 300);
      }

      function buildMailtoUrl(data) {
        const to = config.notifyEmail || 'access@mergecombinator.com';
        const subject = encodeURIComponent('Access Request — mergecombinator.com');
        const body = encodeURIComponent(
          [
            'Access request submitted:',
            `Name: ${data.name || ''}`,
            `Email: ${data.email || ''}`,
            `Role: ${data.role || ''}`,
            `Source: ${window.location.href}`,
            `Timestamp: ${new Date().toISOString()}`
          ].join('\n')
        );
        return `mailto:${to}?subject=${subject}&body=${body}`;
      }

      async function submitToEndpoint(data) {
        const endpoint = config.requestEndpoint;
        if (!endpoint) {
          return { ok: false, skipped: true };
        }

        try {
          // Shape payload to match the SigmaBlox /api/access-request contract.
          const payload = {
            email: data.email,
            name: data.name,
            tier: data.role || 'general',
            website_url: '',
            userAgent: String(navigator.userAgent || ''),
            referrer: String(document.referrer || ''),
            requestedAt: new Date().toISOString(),
            source: window.location.href
          };

          const response = await fetch(endpoint, {
            method: 'POST',
            headers: {
              'Content-Type': 'application/json',
              'Accept': 'application/json'
            },
            body: JSON.stringify(payload)
          });

          if (!response.ok) {
            const text = await response.text().catch(() => '');
            throw new Error(`Endpoint returned ${response.status}: ${text}`);
          }

          return { ok: true };
        } catch (error) {
          console.error('[Access] Endpoint submission failed:', error);
          return { ok: false, error };
        }
      }

      async function handleSubmit(e) {
        e.preventDefault();
        const formData = new FormData(form);
        const data = {
          name: String(formData.get('name') || ''),
          email: String(formData.get('email') || ''),
          role: String(formData.get('role') || '')
        };

        // Try backend submission first when configured
        const result = await submitToEndpoint(data);

        // Fallback: open a prefilled mailto so requests aren't silently dropped
        if (!result.ok) {
          const mailtoUrl = buildMailtoUrl(data);
          window.location.href = mailtoUrl;
        }

        // Always show success state after an attempted submission path
        form.style.display = 'none';
        successEl.style.display = 'block';
      }

      openBtn.addEventListener('click', openDrawer);
      closeBtn.addEventListener('click', closeDrawer);
      backdrop.addEventListener('click', closeDrawer);
      signInLink.addEventListener('click', closeDrawer);
      form.addEventListener('submit', handleSubmit);

      // Close on Escape key
      document.addEventListener('keydown', (e) => {
        if (e.key === 'Escape' && drawer.classList.contains('is-open')) {
          closeDrawer();
        }
      });
    })();
  </script>
</body>
</html>
